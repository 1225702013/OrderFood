define("list:widget/cinema_list/cinema_list.js",function(n){var e=n("common:widget/ui/dialog/dialog.js"),i=n("common:widget/ui/template/template.js"),t=n("common:widget/map/map.js");$(function(){function n(){$("#j-cinema-list").toggleClass("w-cinema-list-show"),$("#j-btn-more").find("span").html($("#j-cinema-list").hasClass("w-cinema-list-show")?"收起":"查看全部团购商家")}function o(){$("#j-cinema-list .j-get-map").on("click",s.initMapDlg),$("#j-btn-more").on("click",n),$("#j-cinema-list .cinema-info-wrap").on({click:function(){var n=$(this).data("url");window.open(n,"_blank")},mouseenter:function(){$(this).addClass("cinema-info-wrap-hover")},mouseleave:function(){$(this).removeClass("cinema-info-wrap-hover")}})}var a=i.template,s={initMapDlg:function(n){n.stopPropagation();var i=$.parseJSON($(n.target).parents(".cinema-info").attr("data-cinema")),t={shop:[i]},o={onshow:function(n){$("#j-md-shop-all").hide(),s.showSearchInfoWindow(n)}},l={width:"auto",height:"auto",title:"查看地图"},c=$("#tpl-map-dlg").html(),d={shopName:t.shop[0].name,count:t.count,shopList:t.shop,singleShop:!0},h=a(c,d);l.content=h;var u=$.extend(l,o),m=new e(u);return m.center(),m.show(t),!1},showSearchInfoWindow:function(n){function e(){l.open({baidu_latitude:c,baidu_longitude:d})}var i=new t("j-md-map-view");i.autoView(n.shop).addPin(n.shop,e),1!=n.count&&n.count||i.zoomTo(15);var o=n.shop[0],a={title:o.name,width:290,height:"auto",panel:"j-search-result",enableAutoPan:!1,enableSendToPhone:!1,searchTypes:[BMAPLIB_TAB_TO_HERE,BMAPLIB_TAB_SEARCH,BMAPLIB_TAB_FROM_HERE]},s='<p style="line-height: 150%;">'+o.address+"<br/>"+o.phone+"</p>",l=new t.searchInfoWindow(i.getMapOrigin(),s,a),c=o.baidu_latitude,d=o.baidu_longitude;i.zoomTo(15).centerTo({baidu_latitude:c,baidu_longitude:d}),l.open({baidu_latitude:c,baidu_longitude:d}),$("#j-md-branch-view .shop-branch").on("click",e)}};o()})});